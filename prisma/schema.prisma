generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url = "file:./dev.db"
}

model paste_errors {
  id           Int     @id @default(autoincrement())
  noreg        String? 
  ruasja       String? 
  status       String? 
  loksta       String? 
  lokasi       String? 
  lokasi2      String? 
  jenperja     String? 
  jenperja2    String? 
  gol          String? 
  nomorjenis   String? 
  arti         String? 
  gambar       Int?
  poska        String? 
  posteng      String? 
  poski        String? 
  terpa        String? 
  kebut        String? 
  baru         String? 
  rusak        String? 
  hilang       String? 
  sumdana      String? 
  ta           String? 
  ket          String? 
  solsel       String? 
  lisman       String? 
  listerkwh    String? 
  listernonkwh String? 
  lamled       String? 
  lampson      String? 
  lammh        String? 
  lamerkuri    String? 
  lamfl        String? 
  lamcfl       String? 
  dayalam      String? 
}

model ews_levels {
  id             Int          @id @default(autoincrement()) 
  station_id     Int          
  measured_at    DateTime     @default(now()) 
  water_level_cm Int
  status         String       
  note           String?      
  ews_stations   ews_stations @relation(fields: [station_id], references: [id], onDelete: Cascade, onUpdate: Restrict)

  @@index([station_id, measured_at])
}

model ews_stations {
  id          Int          @id @default(autoincrement()) 
  name        String       
  location    String?      
  sensor_code String?      
  type        String?      
  status      String       @default("aktif") 
  latitude    Float
  longitude   Float
  description String?      
  created_at  DateTime     @default(now()) 
  updated_at  DateTime     @default(now()) 
  ews_levels  ews_levels[]
}

model EwsNode {
  id        String   @id
  type      String
  lastValue Float
  battery   Int
  wifi      Int
  cpuTemp   Int
  ram       String
  updatedAt DateTime @updatedAt @default(now())
  history   String
}

model PublicReport {
  id          Int      @id @default(autoincrement())
  lat         Float
  lng         Float
  type        String
  district    String
  village     String
  address     String
  desc        String
  name        String
  phone       String
  photo       String
  status      String   @default("Diterima")
  isValidated Boolean  @default(false)
  verif       String
  timestamp   DateTime @default(now())
}

model ResponseReport {
  id          Int      @id @default(autoincrement())
  incidentId  String
  type        String
  district    String?
  village     String?
  hamlet      String?
  address     String?
  chronology  String
  impact      String
  handling    String
  teamLeader  String?
  teamMembers String?
  notes       String?
  created_at  DateTime @default(now())
}

model MapFeature {
  id          Int      @id @default(autoincrement())
  name        String
  category    String   // e.g., "bangunan", "jalan", "bencana"
  year        Int?     // For disaster history
  type        String   // "Point", "LineString", "Polygon"
  geometry    String   // JSON string of coordinates/geometry
  description String?
  icon        String?  // For markers
  color       String?  // For lines/polygons
  created_at  DateTime @default(now())
  updated_at  DateTime @updatedAt @default(now())
}

model BnpbDailySummary {
  id           Int      @id @default(autoincrement())
  kodeKabkot   Int?
  tanggal      DateTime
  tahun        String?
  bulan        String?
  provinsi     String?
  kabkot       String
  kecamatan    String?
  jenisBencana String
  jenisEntry   String?
  md           Int?
  trdmpk       Int?
  rmhFasub     Int?
  bngnTrdm     Int?
  lahan        Float?
  tglInputRaw  String?
  tglUpdateRaw String?
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt @default(now())

  @@index([tahun, kabkot, jenisBencana])
  @@unique([tanggal, kabkot, jenisBencana], name: "tanggal_kabkot_jenisBencana")
}
